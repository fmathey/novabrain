var Novabrain=function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){"use strict";t.exports={Neuron:e(1),Layer:e(3),Network:e(4),Trainer:e(5),Transfer:e(2),Samples:e(6)}},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),a=e(2),s=function(){function t(r){n(this,t),this.bias=.4*Math.random()-.2,this.weights=[],this.changes=[],this.error=0,this.delta=0;for(var e=0;e<r;e++)this.weights.push(.4*Math.random()-.2),this.changes.push(0)}return i(t,[{key:"output",value:function(t,r){if(!Array.isArray(t))throw new Error("Inputs array expected");if(t.length!==this.weights.length)throw new Error("Inputs length "+this.weights.length+" expected");r=r||a.LOGISTIC;for(var e=this.bias,n=0,i=this.weights.length;n<i;n++)e+=this.weights[n]*t[n];return r(e)}},{key:"export",value:function(){return{bias:this.bias,weights:this.weights.slice()}}}]),t}();t.exports=s},function(t,r){"use strict";t.exports={LOGISTIC:function(t){return 1/(1+Math.exp(-t))},HARDLIMIT:function(t){return t>0?1:0},BOOLEAN:function(t){return t>0},IDENTITY:function(t){return t},TANH:function(t){var r=Math.exp(t),e=1/r;return(r-e)/(r+e)}}},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),a=e(1),s=function(){function t(r,e){n(this,t),this.neurons=[];for(var i=0;i<r;i++)this.neurons.push(new a(e))}return i(t,[{key:"output",value:function(t,r){for(var e=[],n=0;n<this.neurons.length;n++)e.push(this.neurons[n].output(t,r));return e}},{key:"export",value:function(){for(var t=[],r=0;r<this.neurons.length;r++)t.push(this.neurons[r].export());return t}}]),t}();t.exports=s},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),a=e(3),s=e(2),o=function(){function t(){n(this,t),this.layers=[];var r=Array.prototype.slice.call(arguments);if(r<2)throw new Error("Network expected 2 integers or more");2===r.length&&r.splice(1,0,Math.max(3,Math.floor(r[0]/2))),this.layers.push(new a(r[0],1));for(var e=1;e<r.length;e++)this.layers.push(new a(r[e],this.layers[e-1].neurons.length));this.transfer=s.LOGISTIC}return i(t,[{key:"output",value:function(t,r){for(var e=[],n=1;n<this.layers.length;n++)e=t=this.layers[n].output(t,r||this.transfer);return e}},{key:"export",value:function(){for(var t=[],r=0;r<this.layers.length;r++)t.push(this.layers[r].export());return t}},{key:"import",value:function(r){if(r instanceof t&&(r=r.export()),r.length!==this.layers.length)throw new Error("Network expected ["+this.layers.length+"] layers");for(var e=0;e<this.layers.length;e++){var n=this.layers[e].neurons;if(r[e].length!==n.length)throw new Error("Layer ["+e+"] expected ["+n.length+"] neurons");for(var i=0;i<n.length;i++){var a=n[i];if(void 0===r[e][i].bias)throw new Error("Neuron ["+i+"] expected a [bias] value");if(a.bias=r[e][i].bias,!Array.isArray(r[e][i].weights))throw new Error("Neuron ["+i+"] expected a [weights] array of ["+a.weights.length+"] values");for(var s=0;s<a.weights.length;s++)a.weights[s]=r[e][i].weights[s]}}return this}},{key:"standalone",value:function(t){t=s.LOGISTIC.toString();var r=JSON.stringify(this.export()),e="";return e+="transfer = transfer || "+t+";",e+="var layers = "+r+";",e+="for (var i = 1; i < layers.length; i++) {",e+="var layer = layers[i];",e+="var outputs = [];",e+="for (var j = 0; j < layer.length; j++) {",e+="var neuron = layer[j];",e+="var result = neuron.bias;",e+="for (var k = 0; k < neuron.weights.length; k++) {",e+="result += neuron.weights[k] * inputs[k];",e+="}",e+="outputs[j] = transfer(result);",e+="}",e+="inputs = outputs;",e+="}",e+="return outputs;",new Function("inputs","transfer",e)}}]),t}();t.exports=o},function(t,r,e){"use strict";function n(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),a=e(4),s=function(){function t(r){if(n(this,t),!(r instanceof a))throw new Error("Network instance expected");this.network=r,this.inputSize=r.layers[0].neurons.length,this.outputSize=r.layers[r.layers.length-1].neurons.length,this.nbLayers=this.network.layers.length,this.lastLayerId=this.nbLayers-1}return i(t,[{key:"train",value:function(t,r){if(r=r||{},r.iterations=r.iterations||2e4,r.learning=r.learning||.3,r.momentum=r.momentum||.1,r.treshold=r.treshold||.005,r.callback=r.callback||null,r.interval=r.interval||10,!Array.isArray(t[0].input)||t[0].input.length!==this.inputSize)throw new Error("Train expected an input data array of "+this.inputSize);if(!Array.isArray(t[0].output)||t[0].output.length!==this.outputSize)throw new Error("Train expected an output data array of "+this.outputSize);for(var e=10,n=0,i=0;i<r.iterations&&e>r.treshold;i++){for(var a=0,s=0;s<t.length;s++)a+=this.trainPattern(t[s].input,t[s].output,r.learning,r.momentum);e=a/t.length,r.callback&&i%r.interval==0&&r.callback({error:e,iterations:i}),n++}return{error:e,iterations:n}}},{key:"trainPattern",value:function(t,r,e,n){e=e||.3,n=n||.1;for(var i=this.getOutputs(t),a=this.lastLayerId;a>=0;a--)for(var s=this.network.layers[a].neurons,o=0;o<s.length;o++){var u=i[a][o],h=0;if(a===this.lastLayerId)h=r[o]-u;else for(var l=this.network.layers[a+1].neurons,f=0;f<l.length;f++)h+=l[f].delta*l[f].weights[o];s[o].error=h,s[o].delta=h*u*(1-u)}for(var a=1;a<this.nbLayers;a++)for(var p=i[a-1],s=this.network.layers[a].neurons,o=0;o<s.length;o++){for(var c=s[o],g=c.delta,f=0;f<p.length;f++){var w=c.changes[f];w=e*g*p[f]+n*w,c.weights[f]+=w,c.changes[f]=w}c.bias+=e*g}for(var y=[],s=this.network.layers[this.lastLayerId].neurons,v=0;v<s.length;v++)y.push(s[v].error);return this.getErrorSum(y)}},{key:"getOutputs",value:function(t){for(var r=[],e=r[0]=t.slice(),n=this.network.layers,i=1;i<n.length;i++)e=r[i]=n[i].output(e);return r}},{key:"getErrorSum",value:function(t){for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return r/t.length}}]),t}();t.exports=s},function(t,r){"use strict";t.exports={XOR:{training:[{input:[0,0],output:[0]},{input:[0,1],output:[1]},{input:[1,0],output:[1]},{input:[1,1],output:[0]}],config:[[{bias:.1804561257362366,weights:[-.167204974219203]},{bias:-.04569602627307176,weights:[.18746992871165274]}],[{bias:4.594158542478944,weights:[-3.040062330305626,-3.362846210091373]},{bias:2.253482826600183,weights:[-5.98762513515333,-5.965287921412066]},{bias:2.2578395038508865,weights:[-2.0587523788017017,-1.562316369066697]}],[{bias:-3.8152869540660492,weights:[5.941256505289369,-8.507284881253804,3.1455340193310843]}]]},AND:{training:[{input:[0,0],output:[0]},{input:[0,1],output:[0]},{input:[1,0],output:[0]},{input:[1,1],output:[1]}],config:[[{bias:.05568741559982299,weights:[-.07880215616896749]},{bias:.11339050624519587,weights:[-.08192619075998664]}],[{bias:1.2162003373115722,weights:[-1.5325596790646399,-1.6694862833366626]},{bias:3.5218949042093537,weights:[-2.9473826605615274,-2.6480166644816325]},{bias:1.2894144846904376,weights:[-1.3971381146583233,-1.8841189975945027]}],[{bias:3.4025251093426854,weights:[-2.7717050850924494,-5.672159962134176,-2.836860716358213]}]]},OR:{training:[{input:[0,0],output:[0]},{input:[0,1],output:[1]},{input:[1,0],output:[1]},{input:[1,1],output:[1]}],config:[[{bias:.023853175062686194,weights:[-.05087699200958015]},{bias:-.04783560279756785,weights:[-.12696466147899627]}],[{bias:.7767897854256859,weights:[-1.7520145026333327,-1.7771349756367834]},{bias:-.47207093390546423,weights:[1.0731066688291095,1.040178424526655]},{bias:-1.5422804887749049,weights:[3.1529762364879015,3.1483531621536285]}],[{bias:-1.2640437852289894,weights:[-3.1821062179619575,1.162433847357973,4.845167062525612]}]]}}}]);